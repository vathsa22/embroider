{"version":3,"file":"modules-compat.js","sourceRoot":"","sources":["modules-compat.ts"],"names":[],"mappings":";;;;;AAQA,gCAKC;AAbD,sEAA0C;AAE1C,gFAA8C;AAE9C,2EAA2E;AAC3E,yEAAyE;AACzE,sEAAsE;AAEtE,SAAwB,aAAa,CAAC,IAAU;IAC9C,OAAO,IAAA,8BAAU,EAAC;QAChB,IAAA,yBAAW,EAAC,IAAI,EAAE,EAAE,OAAO,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC;QAC3C,IAAA,yBAAW,EAAC,IAAI,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC;KAC3D,CAAC,CAAC;AACL,CAAC","sourcesContent":["import buildFunnel from 'broccoli-funnel';\nimport type { Node } from 'broccoli-node-api';\nimport mergeTrees from 'broccoli-merge-trees';\n\n// there is a weirder, older behavior where addons wrapped their addon tree\n// output in a `modules` folder. This strips that level off if it exists,\n// without discarding any other content that was not inside `modules`.\n\nexport default function modulesCompat(tree: Node): Node {\n  return mergeTrees([\n    buildFunnel(tree, { exclude: ['modules'] }),\n    buildFunnel(tree, { srcDir: 'modules', allowEmpty: true }),\n  ]);\n}\n"]}