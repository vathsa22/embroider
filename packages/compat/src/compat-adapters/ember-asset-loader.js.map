{"version":3,"file":"ember-asset-loader.js","sourceRoot":"","sources":["ember-asset-loader.ts"],"names":[],"mappings":";;;;;AAAA,2DAAkC;AAClC,sEAA0C;AAC1C,iEAAyC;AAEzC,gFAAgF;AAChF,gFAAgF;AAChF,2EAA2E;AAC3E,EAAE;AACF,+EAA+E;AAC/E,+EAA+E;AAC/E,uCAAuC;AACvC,EAAE;AACF,gFAAgF;AAChF,4DAA4D;AAC5D,eAAqB,SAAQ,kBAAO;IAClC,IAAI,MAAM;QACR,OAAO,IAAA,yBAAW,EAAC,KAAK,CAAC,MAAM,EAAE;YAC/B,OAAO,EAAE,CAAC,gCAAgC,EAAE,oDAAoD,CAAC;SAClG,CAAC,CAAC;IACL,CAAC;IACD,IAAI,WAAW;QACb,IAAI,IAAI,GAAG,KAAK,CAAC,WAAW,CAAC;QAC7B,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC;YACnB,IAAI,GAAG,IAAA,mBAAS,EAAC,IAAI,CAAC,CAAC;YACvB,OAAO,IAAI,CAAC,QAAQ,CAAE,CAAC,gDAAgD,CAAC,CAAC;YACzE,OAAO,IAAI,CAAC,QAAQ,CAAE,CAAC,4BAA4B,CAAC,CAAC;QACvD,CAAC;QACD,OAAO,IAAI,CAAC;IACd,CAAC;CACF;AAfD,4BAeC","sourcesContent":["import V1Addon from '../v1-addon';\nimport buildFunnel from 'broccoli-funnel';\nimport cloneDeep from 'lodash/cloneDeep';\n\n// ember-asset-loader's ManifestGenerator (which is used as the Addon base class\n// for by ember-engines) has an \"all\" postprocessTree hook. We can't / won't run\n// those in embroider. The hook inserts the asset manifest into index.html.\n//\n// This patch removes the code that would explode if it tries to read from that\n// manifest. ember-asset-loader itself has a mode that excludes these files, so\n// it's tolerant of them being missing.\n//\n// We mostly just want ember-asset-loader to sit down and be quiet, because lazy\n// loading is a thing that is natively handled by embroider.\nexport default class extends V1Addon {\n  get v2Tree() {\n    return buildFunnel(super.v2Tree, {\n      exclude: ['_app_/config/asset-manifest.js', '_app_/instance-initializers/load-asset-manifest.js'],\n    });\n  }\n  get packageMeta() {\n    let meta = super.packageMeta;\n    if (meta['app-js']) {\n      meta = cloneDeep(meta);\n      delete meta['app-js']!['./instance-initializers/load-asset-manifest.js'];\n      delete meta['app-js']!['./config/asset-manifest.js'];\n    }\n    return meta;\n  }\n}\n"]}