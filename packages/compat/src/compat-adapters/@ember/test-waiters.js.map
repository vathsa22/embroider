{"version":3,"file":"test-waiters.js","sourceRoot":"","sources":["test-waiters.ts"],"names":[],"mappings":";;;;;AAAA,8DAAqC;AACrC,mCAAmC;AAEnC,eAAqB,SAAQ,kBAAO;IAClC,uEAAuE;IACvE,0EAA0E;IAC1E,8EAA8E;IAC9E,6CAA6C;IACnC,cAAc,CAAC,KAAa;QACpC,OAAO,KAAK,CAAC;IACf,CAAC;IAED,eAAe,CAAC,SAAoB;QAClC,IAAI,CAAC,IAAA,kBAAS,EAAC,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC;YACpD,MAAM,IAAI,KAAK,CACb,yKAAyK,IAAI,CAAC,WAAW,CAAC,OAAO,GAAG,CACrM,CAAC;QACJ,CAAC;QAED,8EAA8E;QAC9E,6BAA6B;QAC7B,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;IACxB,CAAC;CACF;AApBD,4BAoBC","sourcesContent":["import V1Addon from '../../v1-addon';\nimport { satisfies } from 'semver';\n\nexport default class extends V1Addon {\n  // our heuristic for detecting tree suppression can't deal with the way\n  // test-waiters patches treeFor on other copies of its addon instances all\n  // over the place. It causes us to falsely detect that it's trying to suppress\n  // all tree output, reducing in empty copies.\n  protected suppressesTree(_name: string): boolean {\n    return false;\n  }\n\n  reduceInstances(instances: V1Addon[]): V1Addon[] {\n    if (!satisfies(this.packageJSON.version, '>=3.0.2')) {\n      throw new Error(\n        `@ember/test-waiters cannot work safely under embroider before version 3.0.2 due to https://github.com/emberjs/ember-test-waiters/pull/388. You have a copy at version ${this.packageJSON.version}.`\n      );\n    }\n\n    // we know test waiters tries to dedup itself, so there's no point in building\n    // and smooshing many copies.\n    return [instances[0]];\n  }\n}\n"]}