{"version":3,"file":"ember-svg-jar.js","sourceRoot":"","sources":["ember-svg-jar.ts"],"names":[],"mappings":";;;;;AAAA,2DAAkC;AAClC,gFAA8C;AAC9C,sEAAqC;AACrC,uCAAsF;AACtF,+BAA4B;AAE5B,MAAM,SAAU,SAAQ,yBAAM;IAC5B,KAAK;QACH,IAAI,UAAU,GAAG,IAAA,WAAI,EAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,SAAS,EAAE,YAAY,CAAC,CAAC;QAC5E,IAAI,IAAA,yBAAc,EAAC,UAAU,CAAC,EAAE,CAAC;YAC/B,IAAI,MAAM,GAAG,IAAA,uBAAY,EAAC,UAAU,EAAE,MAAM,CAAC,CAAC;YAC9C,MAAM,GAAG,mDAAmD,GAAG,MAAM,CAAC,OAAO,CAAC,cAAc,EAAE,YAAY,CAAC,CAAC;YAC5G,IAAA,wBAAa,EAAC,IAAA,WAAI,EAAC,IAAI,CAAC,UAAU,EAAE,OAAO,EAAE,SAAS,CAAC,CAAC,CAAC;YACzD,IAAA,wBAAa,EAAC,IAAA,WAAI,EAAC,IAAI,CAAC,UAAU,EAAE,OAAO,EAAE,SAAS,EAAE,YAAY,CAAC,EAAE,MAAM,CAAC,CAAC;QACjF,CAAC;IACH,CAAC;CACF;AAED,eAAqB,SAAQ,kBAAO;IAClC,IAAI,MAAM;QACR,IAAI,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC;QACxB,OAAO,IAAA,8BAAU,EAAC,CAAC,IAAI,EAAE,IAAI,SAAS,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,UAAU,EAAE,aAAa,EAAE,CAAC,CAAC,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;IACvG,CAAC;CACF;AALD,4BAKC","sourcesContent":["import V1Addon from '../v1-addon';\nimport mergeTrees from 'broccoli-merge-trees';\nimport Plugin from 'broccoli-plugin';\nimport { readFileSync, writeFileSync, ensureDirSync, pathExistsSync } from 'fs-extra';\nimport { join } from 'path';\n\nclass FixSVGJar extends Plugin {\n  build() {\n    let helperFile = join(this.inputPaths[0], '_app_', 'helpers', 'svg-jar.js');\n    if (pathExistsSync(helperFile)) {\n      let source = readFileSync(helperFile, 'utf8');\n      source = `import { importSync } from '@embroider/macros';\\n` + source.replace(/\\brequire\\b/g, 'importSync');\n      ensureDirSync(join(this.outputPath, '_app_', 'helpers'));\n      writeFileSync(join(this.outputPath, '_app_', 'helpers', 'svg-jar.js'), source);\n    }\n  }\n}\n\nexport default class extends V1Addon {\n  get v2Tree() {\n    let orig = super.v2Tree;\n    return mergeTrees([orig, new FixSVGJar([orig], { annotation: 'fix-svg-jar' })], { overwrite: true });\n  }\n}\n"]}