{"version":3,"file":"tracking.js","sourceRoot":"","sources":["tracking.ts"],"names":[],"mappings":";;;;;AAAA,8DAAqC;AACrC,sEAAqC;AACrC,+BAA4B;AAC5B,uCAAwD;AAExD;;;;;;;EAOE;AACF,MAAM,eAAgB,SAAQ,yBAAM;IAClC,KAAK;QACH,IAAA,uBAAY,EAAC,IAAA,WAAI,EAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,cAAc,CAAC,EAAE,IAAA,WAAI,EAAC,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,CAAC,CAAC;QAC9F,IAAA,yBAAc,EACZ,IAAA,WAAI,EAAC,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC;QACjC,iDAAiD;QACjD,8EAA8E;QAC9E;;gCAE0B,CAC3B,CAAC;QACF,IAAA,yBAAc,EACZ,IAAA,WAAI,EAAC,IAAI,CAAC,UAAU,EAAE,YAAY,EAAE,UAAU,CAAC,EAC/C,2EAA2E,CAC5E,CAAC;IACJ,CAAC;CACF;AAED,eAAqB,SAAQ,kBAAO;IAClC,IAAI,MAAM;QACR,OAAO,IAAI,eAAe,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;IAC7C,CAAC;CACF;AAJD,4BAIC","sourcesContent":["import V1Addon from '../../v1-addon';\nimport Plugin from 'broccoli-plugin';\nimport { join } from 'path';\nimport { outputFileSync, copyFileSync } from 'fs-extra';\n\n/*\n  @glimmer/tracking is a real package but it has no working implementation. The\n  real implementation is in ember-source.\n\n  Since embroider prioritizes real packages, it's best to provide a compat\n  adapter here to make it into a valid package. It's easy enough for it to\n  reexport the things from ember that are needed.\n*/\nclass RedirectToEmber extends Plugin {\n  build() {\n    copyFileSync(join(this.inputPaths[0], 'package.json'), join(this.outputPath, 'package.json'));\n    outputFileSync(\n      join(this.outputPath, 'index.js'),\n      // Prior to ember-source 4.1, cached didn't exist\n      // using this way of importing from metal, cached will be undefined if pre 4.1\n      `import * as metal from \"@ember/-internals/metal\";\n    const { cached, tracked } = metal;\n    export { cached, tracked };`\n    );\n    outputFileSync(\n      join(this.outputPath, 'primitives', 'cache.js'),\n      `export { createCache, getValue, isConst } from \"@ember/-internals/metal\";`\n    );\n  }\n}\n\nexport default class extends V1Addon {\n  get v2Tree() {\n    return new RedirectToEmber([super.v2Tree]);\n  }\n}\n"]}